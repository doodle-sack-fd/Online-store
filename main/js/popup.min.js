const cntButton = document.querySelector(".contacts-button"), popup = document.querySelector(".modal"), popupClose = popup.querySelector(".modal-close"), userName = popup.querySelector("[name=name]"), userEmail = popup.querySelector("[name=email]"), form = popup.querySelector(".user-form"); let isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("login") } catch (e) { isStorageSupport = !1 } cntButton.addEventListener("click", function (e) { e.preventDefault(), popup.classList.add("modal-show"), userName.focus(), storage ? (userName.value = storage, userEmail.focus()) : userName.focus() }), popupClose.addEventListener("click", function (e) { e.preventDefault(), popup.classList.remove("modal-show"), popup.classList.remove("shake") }), form.addEventListener("submit", function (e) { userName.value && userEmail.value ? isStorageSupport && localStorage.setItem("name", userName.value) : (e.preventDefault(), popup.classList.remove("shake"), popup.offsetWidth = popup.offsetWidth, popup.classList.add("shake")) }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && popup.classList.contains("modal-show") && (e.preventDefault(), popup.classList.remove("modal-show")) });